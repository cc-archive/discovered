<?xml version="1.0"?>

<project name="oenutch">

	<import file="build.xml"/>

	<target name="aggregate" depends="job">
		<path id="aggregate.classpath">
			<!-- <pathelement location="${basedir}" /> -->
			<pathelement location="${build.dir}/${final.name}.job" />
		    <path refid="classpath"/>
		</path>

		<java classname="org.creativecommons.learn.aggregate.Main"
			 fork="true" dir="${basedir}">
			<classpath refid="aggregate.classpath"/>
		</java>
		
	</target>
	
	<target name="makeseed" depends="compile-core">
		<path id="aggregate.classpath">
			<pathelement location="${basedir}" />
		    <path refid="classpath"/>
		</path>

		<java classname="org.creativecommons.learn.nutch.MakeSeed"
			 fork="true" dir="${basedir}">
			<classpath refid="aggregate.classpath"/>
			
			<arg value="${ded.crawl.seeddir}" />
		</java>		
	</target>
	
	<target name="crawl" depends="job">
		<exec dir="${basedir}" executable="${basedir}/bin/nutch">
			<arg value="crawl" />
			<arg path="${ded.crawl.seeddir}" />
			<arg value="-depth" />
			<arg value="1" />
			<env key="JAVA_HOME" value="${java.home}" />
		</exec>
	</target>

    <target name="runtest" description="Runs the test you specify on the command 
        line with -Dtest=" depends="compile-core">
        <junit printsummary="withOutAndErr" fork="yes"> 
            <classpath refid="classpath" />
            <formatter type="plain" usefile="false"/>
            <batchtest>
                <fileset dir="${src}">
                    <include name="**/${test}.java"/>
                </fileset>
            </batchtest>
        </junit>
    </target>

</project>
