<?xml version="1.0"?>

<project name="oenutch">

	<import file="build.xml"/>

	<target name="aggregate" depends="job">
		<path id="aggregate.classpath">
			<!-- <pathelement location="${basedir}" /> -->
			<pathelement location="${build.dir}/${final.name}.job" />
		    <path refid="classpath"/>
		</path>

		<java classname="org.creativecommons.learn.aggregate.Main"
			 fork="true" dir="${basedir}">
			<classpath refid="aggregate.classpath"/>
		</java>
		
	</target>
	
	<target name="makeseed" depends="compile-core">
		<path id="aggregate.classpath">
			<pathelement location="${basedir}" />
		    <path refid="classpath"/>
		</path>

		<java classname="org.creativecommons.learn.nutch.MakeSeed"
			 fork="true" dir="${basedir}">
			<classpath refid="aggregate.classpath"/>
			
			<arg value="${ded.crawl.seeddir}" />
		</java>		
	</target>
	
	<target name="crawl" depends="job">
		<exec dir="${basedir}" executable="${basedir}/bin/nutch">
			<arg value="crawl" />
			<arg path="${ded.crawl.seeddir}" />
			<arg value="-depth" />
			<arg value="1" />
			<env key="JAVA_HOME" value="${java.home}" />
		</exec>
	</target>

	<target name="cc_test" depends="compile-core">
	    <junit>
	        <formatter type="plain" usefile="false"/>
	        <classpath refid="test.classpath"/>
            <test name="org.creativecommons.learn.TestCuratorFeed" />
            <test name="org.creativecommons.learn.TestRDFaTitle" />
	        <batchtest>
	            <formatter type="brief" usefile="false" />
	        </batchtest>
	    </junit>
	</target>

	<target name="cc_test_current" depends="compile-core">
        <!-- The idea is that this target will contain the test we're working
          on right now -->
	    <junit>
	        <formatter type="plain" usefile="false"/>
	        <classpath refid="test.classpath"/>
            <test name="org.creativecommons.learn.TestRDFaTitle" />
	        <batchtest>
	            <formatter type="brief" usefile="false" />
	        </batchtest>
	    </junit>
	</target>
</project>
